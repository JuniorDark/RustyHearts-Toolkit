<Window
    x:Class="RHToolkit.Views.Windows.SkillEditorWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:bh="clr-namespace:RHToolkit.Behaviors"
    xmlns:control="clr-namespace:RHToolkit.Views.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dt="clr-namespace:RHToolkit.Models.DataTemplates"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:local="clr-namespace:RHToolkit.Utilities.Converters"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:rs="clr-namespace:RHToolkit.Properties"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:windows="clr-namespace:RHToolkit.ViewModels.Windows"
    Title="{Binding Title}"
    MinWidth="1280"
    MinHeight="720"
    MaxHeight="{Binding Source={x:Static SystemParameters.MaximizedPrimaryScreenHeight}}"
    bh:WindowBehaviors.EnableDragMove="True"
    d:DataContext="{d:DesignInstance Type=windows:SkillEditorViewModel}"
    d:MaxHeight="720"
    d:MaxWidth="1280"
    AllowsTransparency="True"
    Background="Transparent"
    Icon="/Assets/icon/icon_magic_area01.png"
    ResizeMode="CanResize"
    WindowStartupLocation="CenterScreen"
    WindowStyle="None"
    mc:Ignorable="d">
    <Window.InputBindings>
        <KeyBinding Command="{Binding LoadFileCommand}" Gesture="Ctrl+O" />
        <KeyBinding Command="{Binding LoadFileAsCommand}" Gesture="Ctrl+Shift+O" />
        <KeyBinding Command="{Binding DataTableManager.SaveFileCommand}" Gesture="Ctrl+S" />
        <KeyBinding Command="{Binding DataTableManager.SaveFileAsCommand}" Gesture="Ctrl+Alt+S" />
        <KeyBinding Command="{Binding DataTableManager.SaveFileAsMIPCommand}" Gesture="Ctrl+Shift+S" />
        <KeyBinding Command="{Binding CloseFileCommand}" Gesture="Ctrl+W" />
        <KeyBinding
            Command="{Binding OpenSearchDialogCommand}"
            CommandParameter="Find"
            Gesture="Ctrl+F" />
        <KeyBinding
            Command="{Binding OpenSearchDialogCommand}"
            CommandParameter="Replace"
            Gesture="Ctrl+H" />
        <!--  Skill Files  -->
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="frantzskill.rh"
            Gesture="Ctrl+1" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="angelaskill.rh"
            Gesture="Ctrl+2" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="tudeskill.rh"
            Gesture="Ctrl+3" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="natashaskill.rh"
            Gesture="Ctrl+4" />

        <!--  Skill Tree Files  -->
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="frantzskilltree.rh"
            Gesture="Ctrl+Shift+1" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="angelaskilltree.rh"
            Gesture="Ctrl+Shift+2" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="tudeskilltree.rh"
            Gesture="Ctrl+Shift+3" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="natashaskilltree.rh"
            Gesture="Ctrl+Shift+4" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="frantzavatar01skilltree.rh"
            Gesture="Ctrl+Shift+5" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="frantzavatar02skilltree.rh"
            Gesture="Ctrl+Shift+6" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="angelaavatar01skilltree.rh"
            Gesture="Ctrl+Shift+7" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="tudeavatar01skilltree.rh"
            Gesture="Ctrl+Shift+8" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="natashaavatar01skilltree.rh"
            Gesture="Ctrl+Shift+9" />

        <!--  Skill Tree UI Files  -->
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="frantzmyskillui.rh"
            Gesture="Ctrl+Alt+1" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="angelamyskillui.rh"
            Gesture="Ctrl+Alt+2" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="tudemyskillui.rh"
            Gesture="Ctrl+Alt+3" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="natashamyskillui.rh"
            Gesture="Ctrl+Alt+4" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="frantzavatar01myskillui.rh"
            Gesture="Ctrl+Alt+5" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="frantzavatar02myskillui.rh"
            Gesture="Ctrl+Alt+6" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="angelaavatar01myskillui.rh"
            Gesture="Ctrl+Alt+7" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="tudeavatar01myskillui.rh"
            Gesture="Ctrl+Alt+8" />
        <KeyBinding
            Command="{Binding LoadFileCommand}"
            CommandParameter="natasha_avatar01_myskillui.rh"
            Gesture="Ctrl+Alt+9" />
    </Window.InputBindings>
    <Window.Resources>
        <!--  Template for Skill  -->
        <DataTemplate x:Key="Skill">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <StackPanel
                    Grid.Column="0"
                    Margin="0,0,0,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    Orientation="Vertical">
                    <control:SkillSlot
                        Margin="0,0,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top"
                        SkillDataViewModel="{Binding DataContext.SkillDataViewModel, RelativeSource={RelativeSource AncestorType=Window}}"
                        SkillType="{Binding DataContext.SkillDataViewModel.SkillType, RelativeSource={RelativeSource AncestorType=Window}}" />
                    <control:SkillFrame
                        Width="300"
                        Height="Auto"
                        Margin="-30,0,10,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        DataContext="{Binding DataContext.SkillDataViewModel, RelativeSource={RelativeSource AncestorType=Window}}" />
                </StackPanel>

                <UniformGrid Grid.Column="1" Columns="4">
                    <FrameworkElement x:Name="c1" />
                </UniformGrid>
                <TabControl
                    Grid.Column="1"
                    Margin="0,0,0,0"
                    Background="Transparent"
                    BorderBrush="Transparent">
                    <TabItem
                        x:Name="tab1"
                        Width="{Binding ElementName=c1, Path=ActualWidth}"
                        Foreground="White"
                        Header="Skill Info"
                        Style="{StaticResource lb_tab}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <StackPanel
                                Grid.Row="0"
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="{x:Static rs:Resources.ID}" />
                                <ui:NumberBox
                                    MinWidth="150"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    Maximum="2147483647"
                                    Minimum="0"
                                    Value="{Binding DataContext.DataTableManager.SelectedItem[nID], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="nID" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ui:NumberBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="0"
                                Grid.Column="2"
                                Grid.ColumnSpan="2"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Skill ID" />
                                <ui:NumberBox
                                    MinWidth="150"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    Maximum="2147483647"
                                    Minimum="0"
                                    Value="{Binding DataContext.DataTableManager.SelectedItem[nSkillID], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="nSkillID" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ui:NumberBox>
                            </StackPanel>

                            <StackPanel
                                Grid.Row="1"
                                Grid.Column="1"
                                Grid.ColumnSpan="3"
                                Margin="-50,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Icon" />
                                <TextBox
                                    Width="Auto"
                                    Height="30"
                                    Margin="0,0"
                                    d:Text="szIcon"
                                    FontSize="12"
                                    Template="{StaticResource lb_textbox11}"
                                    Text="{Binding DataContext.DataTableManager.SelectedItem[szIcon], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="szIcon" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </TextBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="1"
                                Grid.Column="0"
                                Margin="0,10,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center"
                                Orientation="Vertical">
                                <Image
                                    Width="36"
                                    Height="36"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    Source="{Binding DataContext.DataTableManager.SelectedItem[szIcon], RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource IconNameToImageSourceConverter}}"
                                    Stretch="Fill" />
                            </StackPanel>

                            <StackPanel
                                Grid.Row="2"
                                Grid.Column="0"
                                Grid.ColumnSpan="4"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="{x:Static rs:Resources.Name}" />
                                <TextBox
                                    Width="Auto"
                                    Height="30"
                                    Margin="0,0"
                                    d:Text="wszName"
                                    FontSize="12"
                                    Template="{StaticResource lb_textbox11}"
                                    Text="{Binding DataContext.DataTableManager.SelectedItemString[wszName], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="wszName" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemStringValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </TextBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="3"
                                Grid.Column="0"
                                Grid.ColumnSpan="4"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Attribute" />
                                <TextBox
                                    Width="Auto"
                                    Height="30"
                                    Margin="0,0"
                                    d:Text="wszAttribute"
                                    FontSize="12"
                                    Template="{StaticResource lb_textbox11}"
                                    Text="{Binding DataContext.DataTableManager.SelectedItemString[wszAttribute], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="wszAttribute" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemStringValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </TextBox>
                            </StackPanel>

                            <StackPanel
                                Grid.Row="4"
                                Grid.Column="0"
                                Grid.ColumnSpan="4"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Description 01" />
                                <TextBox
                                    Width="Auto"
                                    Height="70"
                                    Margin="0,0"
                                    d:Text="wszDescription"
                                    FontSize="12"
                                    Template="{StaticResource lb_textbox11}"
                                    Text="{Binding DataContext.DataTableManager.SelectedItemString[wszDescription], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}"
                                    TextWrapping="Wrap">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="wszDescription" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemStringValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </TextBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="5"
                                Grid.Column="0"
                                Grid.ColumnSpan="4"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Description 02" />
                                <TextBox
                                    Width="Auto"
                                    Height="70"
                                    Margin="0,0"
                                    d:Text="wszDescription1"
                                    FontSize="12"
                                    Template="{StaticResource lb_textbox11}"
                                    Text="{Binding DataContext.DataTableManager.SelectedItemString[wszDescription1], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}"
                                    TextWrapping="Wrap">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="wszDescription1" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemStringValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </TextBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="6"
                                Grid.Column="0"
                                Grid.ColumnSpan="4"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Description 03" />
                                <TextBox
                                    Width="Auto"
                                    Height="70"
                                    Margin="0,0"
                                    d:Text="wszDescription2"
                                    FontSize="12"
                                    Template="{StaticResource lb_textbox11}"
                                    Text="{Binding DataContext.DataTableManager.SelectedItemString[wszDescription2], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}"
                                    TextWrapping="Wrap">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="wszDescription2" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemStringValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </TextBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="7"
                                Grid.Column="0"
                                Grid.ColumnSpan="4"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Description 04" />
                                <TextBox
                                    Width="Auto"
                                    Height="70"
                                    Margin="0,0"
                                    d:Text="wszDescription3"
                                    FontSize="12"
                                    Template="{StaticResource lb_textbox11}"
                                    Text="{Binding DataContext.DataTableManager.SelectedItemString[wszDescription3], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}"
                                    TextWrapping="Wrap">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="wszDescription3" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemStringValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </TextBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="8"
                                Grid.Column="0"
                                Grid.ColumnSpan="4"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Description 05" />
                                <TextBox
                                    Width="Auto"
                                    Height="70"
                                    Margin="0,0"
                                    d:Text="wszDescription4"
                                    FontSize="12"
                                    Template="{StaticResource lb_textbox11}"
                                    Text="{Binding DataContext.DataTableManager.SelectedItemString[wszDescription4], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}"
                                    TextWrapping="Wrap">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="wszDescription4" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemStringValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </TextBox>
                            </StackPanel>

                        </Grid>
                    </TabItem>
                    <TabItem
                        x:Name="tab2"
                        Width="{Binding ElementName=c1, Path=ActualWidth}"
                        Foreground="White"
                        Header="Skill Stats"
                        Style="{StaticResource lb_tab}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <StackPanel
                                Grid.Row="0"
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Orientation="Vertical">
                                <CheckBox
                                    Margin="0,10,0,0"
                                    Content="Awakening Mode"
                                    IsChecked="{Binding DataContext.DataTableManager.SelectedItem[nAwakeningMode], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}"
                                    Template="{StaticResource lb_checkbox}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="nAwakeningMode" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </CheckBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="0"
                                Grid.Column="2"
                                Grid.ColumnSpan="2"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Orientation="Vertical">
                                <CheckBox
                                    Margin="0,10,0,0"
                                    Content="Invincibility"
                                    IsChecked="{Binding DataContext.DataTableManager.SelectedItem[nInvincibility], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}"
                                    Template="{StaticResource lb_checkbox}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="nInvincibility" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </CheckBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="1"
                                Grid.Column="2"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Skill Point Cost" />
                                <ui:NumberBox
                                    MinWidth="120"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    Maximum="2147483647"
                                    Minimum="0"
                                    Value="{Binding DataContext.DataTableManager.SelectedItem[nCost], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="nCost" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ui:NumberBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="1"
                                Grid.Column="3"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Skill Cooldown" />
                                <ui:NumberBox
                                    MinWidth="120"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    Maximum="2147483647"
                                    Minimum="0"
                                    Value="{Binding DataContext.DataTableManager.SelectedItem[fCoolTime], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="fCoolTime" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ui:NumberBox>
                            </StackPanel>

                            <StackPanel
                                Grid.Row="1"
                                Grid.Column="0"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Skill Level" />
                                <ui:NumberBox
                                    MinWidth="120"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    Maximum="2147483647"
                                    Minimum="0"
                                    Value="{Binding DataContext.DataTableManager.SelectedItem[nSkillLevel], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="nSkillLevel" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ui:NumberBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="1"
                                Grid.Column="1"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Learn Level" />
                                <ui:NumberBox
                                    MinWidth="120"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    Maximum="2147483647"
                                    Minimum="0"
                                    Value="{Binding DataContext.DataTableManager.SelectedItem[nLearnLevel], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="nLearnLevel" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ui:NumberBox>
                            </StackPanel>

                            <StackPanel
                                Grid.Row="2"
                                Grid.Column="0"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="MP Cost" />
                                <ui:NumberBox
                                    MinWidth="120"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    Maximum="2147483647"
                                    Minimum="0"
                                    Value="{Binding DataContext.DataTableManager.SelectedItem[fMP], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="fMP" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ui:NumberBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="2"
                                Grid.Column="1"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="HP Cost" />
                                <ui:NumberBox
                                    MinWidth="120"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    Maximum="2147483647"
                                    Minimum="0"
                                    Value="{Binding DataContext.DataTableManager.SelectedItem[fHP], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="fHP" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ui:NumberBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="2"
                                Grid.Column="2"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="AP Cost" />
                                <ui:NumberBox
                                    MinWidth="120"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    Maximum="2147483647"
                                    Minimum="0"
                                    Value="{Binding DataContext.DataTableManager.SelectedItem[nSG], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="nSG" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ui:NumberBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="2"
                                Grid.Column="3"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="HP Percent Cost" />
                                <ui:NumberBox
                                    MinWidth="120"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    Maximum="2147483647"
                                    Minimum="0"
                                    Value="{Binding DataContext.DataTableManager.SelectedItem[fHPPercent], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="fHPPercent" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ui:NumberBox>
                            </StackPanel>

                            <StackPanel
                                Grid.Row="3"
                                Grid.Column="0"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Auto Equip Slot ID" />
                                <ui:NumberBox
                                    MinWidth="120"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    Maximum="2147483647"
                                    Minimum="0"
                                    Value="{Binding DataContext.DataTableManager.SelectedItem[nAutoEquipSlotID], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="nAutoEquipSlotID" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ui:NumberBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="3"
                                Grid.Column="1"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="UI Page" />
                                <ui:NumberBox
                                    MinWidth="120"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    Maximum="2147483647"
                                    Minimum="0"
                                    Value="{Binding DataContext.DataTableManager.SelectedItem[nUIPage], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="nUIPage" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ui:NumberBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="3"
                                Grid.Column="2"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Correction" />
                                <ui:NumberBox
                                    MinWidth="120"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    Maximum="2147483647"
                                    Minimum="0"
                                    Value="{Binding DataContext.DataTableManager.SelectedItem[nCorrection], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="nCorrection" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ui:NumberBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="3"
                                Grid.Column="3"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Attribute Group" />
                                <ui:NumberBox
                                    MinWidth="120"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    Maximum="2147483647"
                                    Minimum="0"
                                    Value="{Binding DataContext.DataTableManager.SelectedItem[nAttributeGroup], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="nAttributeGroup" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ui:NumberBox>
                            </StackPanel>

                            <StackPanel
                                Grid.Row="4"
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Total Damage" />
                                <TextBox
                                    Width="Auto"
                                    Height="30"
                                    Margin="0,0"
                                    d:Text="TotalDamage"
                                    FontSize="12"
                                    Template="{StaticResource lb_textbox11}"
                                    Text="{Binding DataContext.TotalDamage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType=Window}}" />
                            </StackPanel>
                            <StackPanel
                                Grid.Row="4"
                                Grid.Column="2"
                                Grid.ColumnSpan="2"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Weapon Damage Skill" />
                                <TextBox
                                    Width="Auto"
                                    Height="30"
                                    Margin="0,0"
                                    d:Text="WeaponDamageSkill"
                                    FontSize="12"
                                    Template="{StaticResource lb_textbox11}"
                                    Text="{Binding DataContext.WeaponDamageSkill, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType=Window}}" />
                            </StackPanel>

                            <ItemsControl
                                Grid.Row="5"
                                Grid.ColumnSpan="4"
                                Height="550"
                                Margin="0,0,0,0"
                                AlternationCount="{Binding DataContext.SkillParam.Count, RelativeSource={RelativeSource AncestorType=Window}}"
                                ItemsSource="{Binding DataContext.SkillParam, RelativeSource={RelativeSource AncestorType=Window}}">
                                <ItemsControl.Template>
                                    <ControlTemplate TargetType="ItemsControl">
                                        <ScrollViewer Style="{StaticResource lb_scrollviewer}" VerticalScrollBarVisibility="Auto">
                                            <ItemsPresenter />
                                        </ScrollViewer>
                                    </ControlTemplate>
                                </ItemsControl.Template>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <StackPanel
                                                Margin="0,0,0,0"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Top"
                                                Orientation="Vertical">
                                                <StackPanel
                                                    Margin="0,0,0,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    Orientation="Vertical">
                                                    <TextBlock Foreground="White" Text="{Binding Path=(ItemsControl.AlternationIndex), RelativeSource={RelativeSource AncestorType=ContentPresenter}, Converter={StaticResource IndexToNumberConverter}, StringFormat='Parameter Name {0}'}" />
                                                    <ComboBox
                                                        Height="24"
                                                        MinWidth="200"
                                                        Margin="0,0,0,0"
                                                        HorizontalAlignment="Left"
                                                        HorizontalContentAlignment="Left"
                                                        VerticalContentAlignment="Center"
                                                        IsReadOnly="True"
                                                        ItemsSource="{Binding DataContext.ParamNameItems, RelativeSource={RelativeSource AncestorType=Window}}"
                                                        SelectedValue="{Binding ParamName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                        Style="{StaticResource ComboBoxStyle}"
                                                        Template="{StaticResource lb_combobox}" />
                                                </StackPanel>
                                                <StackPanel
                                                    Margin="0,0,0,0"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Top"
                                                    Orientation="Vertical">
                                                    <TextBlock Foreground="White" Text="{Binding Path=(ItemsControl.AlternationIndex), RelativeSource={RelativeSource AncestorType=ContentPresenter}, Converter={StaticResource IndexToNumberConverter}, StringFormat='Parameter Value {0}'}" />
                                                    <ui:NumberBox
                                                        Width="200"
                                                        Margin="0,0,0,0"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Top"
                                                        Maximum="2147483647"
                                                        Value="{Binding ParamValue, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                </StackPanel>
                                            </StackPanel>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                        </Grid>
                    </TabItem>
                    <TabItem
                        x:Name="tab3"
                        Width="{Binding ElementName=c1, Path=ActualWidth}"
                        Foreground="White"
                        Header="Skill Data"
                        Style="{StaticResource lb_tab}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <StackPanel
                                Grid.Row="0"
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Character Type" />
                                <ComboBox
                                    Height="24"
                                    MinWidth="200"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Left"
                                    HorizontalContentAlignment="Left"
                                    VerticalContentAlignment="Center"
                                    IsReadOnly="True"
                                    ItemsSource="{Binding DataContext.CharacterTypeItems, RelativeSource={RelativeSource AncestorType=Window}}"
                                    SelectedValue="{Binding DataContext.DataTableManager.SelectedItem[szCharacterType], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}"
                                    Style="{StaticResource ComboBoxStyle}"
                                    Template="{StaticResource lb_combobox}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="szCharacterType" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ComboBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="0"
                                Grid.Column="2"
                                Grid.ColumnSpan="2"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Skill Type" />
                                <ComboBox
                                    Height="24"
                                    MinWidth="200"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Left"
                                    HorizontalContentAlignment="Left"
                                    VerticalContentAlignment="Center"
                                    IsReadOnly="True"
                                    ItemsSource="{Binding DataContext.SkillTypeItems, RelativeSource={RelativeSource AncestorType=Window}}"
                                    SelectedValue="{Binding DataContext.DataTableManager.SelectedItem[szSkillType], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}"
                                    Style="{StaticResource ComboBoxStyle}"
                                    Template="{StaticResource lb_combobox}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="szSkillType" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ComboBox>
                            </StackPanel>

                            <StackPanel
                                Grid.Row="1"
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Skill Active Type" />
                                <ComboBox
                                    Height="24"
                                    MinWidth="200"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Left"
                                    HorizontalContentAlignment="Left"
                                    VerticalContentAlignment="Center"
                                    IsReadOnly="True"
                                    ItemsSource="{Binding DataContext.SkillActiveTypeItems, RelativeSource={RelativeSource AncestorType=Window}}"
                                    SelectedValue="{Binding DataContext.DataTableManager.SelectedItem[szSkillActiveType], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}"
                                    Style="{StaticResource ComboBoxStyle}"
                                    Template="{StaticResource lb_combobox}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="szSkillActiveType" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ComboBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="1"
                                Grid.Column="2"
                                Grid.ColumnSpan="2"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Target" />
                                <ComboBox
                                    Height="24"
                                    MinWidth="200"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Left"
                                    HorizontalContentAlignment="Left"
                                    VerticalContentAlignment="Center"
                                    IsReadOnly="True"
                                    ItemsSource="{Binding DataContext.SkillTargetItems, RelativeSource={RelativeSource AncestorType=Window}}"
                                    SelectedValue="{Binding DataContext.DataTableManager.SelectedItem[szTarget], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}"
                                    Style="{StaticResource ComboBoxStyle}"
                                    Template="{StaticResource lb_combobox}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="szTarget" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ComboBox>
                            </StackPanel>

                            <StackPanel
                                Grid.Row="2"
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="State True" />
                                <ListView
                                    Width="Auto"
                                    Height="200"
                                    MinWidth="300"
                                    Margin="0,0,0,0"
                                    ItemsSource="{Binding DataContext.StateTrueItems, Mode=TwoWay, RelativeSource={RelativeSource AncestorType=Window}}"
                                    SelectionMode="Multiple">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior
                                            Column="szStateTrue"
                                            SelectedItemsString="{Binding DataContext.DataTableManager.SelectedItem[szStateTrue], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}"
                                            UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ListView>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="2"
                                Grid.Column="2"
                                Grid.ColumnSpan="2"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="State False" />
                                <ListView
                                    Width="Auto"
                                    Height="200"
                                    MinWidth="300"
                                    Margin="0,0,0,0"
                                    ItemsSource="{Binding DataContext.StateFalseItems, Mode=TwoWay, RelativeSource={RelativeSource AncestorType=Window}}"
                                    SelectionMode="Multiple">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior
                                            Column="szStateFalse"
                                            SelectedItemsString="{Binding DataContext.DataTableManager.SelectedItem[szStateFalse], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}"
                                            UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </ListView>
                            </StackPanel>

                            <StackPanel
                                Grid.Row="3"
                                Grid.Column="0"
                                Grid.ColumnSpan="4"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Catch Type" />
                                <TextBox
                                    Width="Auto"
                                    Height="30"
                                    Margin="0,0"
                                    d:Text="szCatchType"
                                    FontSize="12"
                                    Template="{StaticResource lb_textbox11}"
                                    Text="{Binding DataContext.DataTableManager.SelectedItem[szCatchType], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="szCatchType" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </TextBox>
                            </StackPanel>

                            <StackPanel
                                Grid.Row="4"
                                Grid.Column="0"
                                Grid.ColumnSpan="4"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Skill Type" />
                                <TextBox
                                    Width="Auto"
                                    Height="30"
                                    Margin="0,0"
                                    d:Text="szT_SkillType"
                                    FontSize="12"
                                    Template="{StaticResource lb_textbox11}"
                                    Text="{Binding DataContext.DataTableManager.SelectedItem[szT_SkillType], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="szT_SkillType" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </TextBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="5"
                                Grid.Column="0"
                                Grid.ColumnSpan="4"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Skill Active Type" />
                                <TextBox
                                    Width="Auto"
                                    Height="30"
                                    Margin="0,0"
                                    d:Text="szT_SkillActiveType"
                                    FontSize="12"
                                    Template="{StaticResource lb_textbox11}"
                                    Text="{Binding DataContext.DataTableManager.SelectedItem[szT_SkillActiveType], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="szT_SkillActiveType" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </TextBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="6"
                                Grid.Column="0"
                                Grid.ColumnSpan="4"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Param Name" />
                                <TextBox
                                    Width="Auto"
                                    Height="30"
                                    Margin="0,0"
                                    d:Text="szT_ParamName"
                                    FontSize="12"
                                    Template="{StaticResource lb_textbox11}"
                                    Text="{Binding DataContext.DataTableManager.SelectedItem[szT_ParamName], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="szT_ParamName" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </TextBox>
                            </StackPanel>
                            <StackPanel
                                Grid.Row="7"
                                Grid.Column="0"
                                Grid.ColumnSpan="4"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="Param Name Desc" />
                                <TextBox
                                    Width="Auto"
                                    Height="30"
                                    Margin="0,0"
                                    d:Text="wszT_ParamNameDesc"
                                    FontSize="12"
                                    Template="{StaticResource lb_textbox11}"
                                    Text="{Binding DataContext.DataTableManager.SelectedItem[wszT_ParamNameDesc], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                                    <i:Interaction.Behaviors>
                                        <bh:DataRowViewBehavior Column="wszT_ParamNameDesc" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                                    </i:Interaction.Behaviors>
                                </TextBox>
                            </StackPanel>

                        </Grid>
                    </TabItem>
                    <TabItem
                        x:Name="tab4"
                        Width="{Binding ElementName=c1, Path=ActualWidth}"
                        Foreground="White"
                        Header="Skill Motion"
                        Style="{StaticResource lb_tab}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <ItemsControl
                                Grid.Row="0"
                                Grid.ColumnSpan="4"
                                Height="600"
                                Margin="0,0,0,0"
                                AlternationCount="{Binding DataContext.SkillMotion.Count, RelativeSource={RelativeSource AncestorType=Window}}"
                                ItemsSource="{Binding DataContext.SkillMotion, RelativeSource={RelativeSource AncestorType=Window}}">
                                <ItemsControl.Template>
                                    <ControlTemplate TargetType="ItemsControl">
                                        <ScrollViewer Style="{StaticResource lb_scrollviewer}" VerticalScrollBarVisibility="Auto">
                                            <ItemsPresenter />
                                        </ScrollViewer>
                                    </ControlTemplate>
                                </ItemsControl.Template>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <StackPanel
                                                Margin="0,0,0,0"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Top"
                                                Orientation="Vertical">
                                                <StackPanel
                                                    Margin="0,0,0,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    Orientation="Vertical">
                                                    <TextBlock Foreground="White" Text="{Binding Path=(ItemsControl.AlternationIndex), RelativeSource={RelativeSource AncestorType=ContentPresenter}, Converter={StaticResource IndexToNumberConverter}, StringFormat='Skill Motion {0}'}" />
                                                    <TextBox
                                                        Width="Auto"
                                                        Height="30"
                                                        Margin="0,0"
                                                        d:Text="Mc"
                                                        FontSize="12"
                                                        Template="{StaticResource lb_textbox11}"
                                                        Text="{Binding SkillMotion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                </StackPanel>
                                                <StackPanel
                                                    Margin="0,0,0,0"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Top"
                                                    Orientation="Vertical">
                                                    <TextBlock Foreground="White" Text="{Binding Path=(ItemsControl.AlternationIndex), RelativeSource={RelativeSource AncestorType=ContentPresenter}, Converter={StaticResource IndexToNumberConverter}, StringFormat='Motion Category {0}'}" />
                                                    <ui:NumberBox
                                                        Width="200"
                                                        Margin="0,0,0,0"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Top"
                                                        Maximum="2147483647"
                                                        Minimum="0"
                                                        Value="{Binding SkillMotionCategory, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                </StackPanel>
                                                <StackPanel
                                                    Margin="0,0,0,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    Orientation="Vertical">
                                                    <TextBlock Foreground="White" Text="{Binding Path=(ItemsControl.AlternationIndex), RelativeSource={RelativeSource AncestorType=ContentPresenter}, Converter={StaticResource IndexToNumberConverter}, StringFormat='Skill Motion SG {0}'}" />
                                                    <TextBox
                                                        Width="Auto"
                                                        Height="30"
                                                        Margin="0,0"
                                                        d:Text="Mc"
                                                        FontSize="12"
                                                        Template="{StaticResource lb_textbox11}"
                                                        Text="{Binding SkillMotionSG, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                </StackPanel>
                                                <StackPanel
                                                    Margin="0,0,0,0"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Top"
                                                    Orientation="Vertical">
                                                    <TextBlock Foreground="White" Text="{Binding Path=(ItemsControl.AlternationIndex), RelativeSource={RelativeSource AncestorType=ContentPresenter}, Converter={StaticResource IndexToNumberConverter}, StringFormat='Motion Category SG {0}'}" />
                                                    <ui:NumberBox
                                                        Width="200"
                                                        Margin="0,0,0,0"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Top"
                                                        Maximum="2147483647"
                                                        Minimum="0"
                                                        Value="{Binding SkillMotionCategorySG, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                </StackPanel>
                                            </StackPanel>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                        </Grid>
                    </TabItem>
                </TabControl>
            </Grid>
        </DataTemplate>
        <!--  Template for SkillTree  -->
        <DataTemplate x:Key="SkillTree">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <StackPanel
                    Grid.Row="0"
                    Margin="0,0,0,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top"
                    Orientation="Vertical">
                    <TextBlock Foreground="White" Text="{x:Static rs:Resources.ID}" />
                    <ui:NumberBox
                        Width="200"
                        Margin="0,0,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top"
                        Maximum="2147483647"
                        Minimum="0"
                        Value="{Binding DataContext.DataTableManager.SelectedItem[nID], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                        <i:Interaction.Behaviors>
                            <bh:DataRowViewBehavior Column="nID" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                        </i:Interaction.Behaviors>
                    </ui:NumberBox>
                </StackPanel>

                <StackPanel
                    Grid.Row="1"
                    Margin="0,20,0,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top"
                    Orientation="Vertical">
                    <Image
                        Margin="0,0,0,10"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Cursor="Help"
                        Source="/Assets/icon/icon_help_tip.png"
                        Stretch="None"
                        ToolTip="{x:Static rs:Resources.AddSkillHelp}" />
                    <TextBlock Foreground="White" Text="Skill" />
                    <control:SkillSlot
                        Margin="0,0,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top"
                        AddSkillCommand="{Binding DataContext.AddSkillCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                        CommandParameter="0"
                        RemoveSkillCommand="{Binding DataContext.RemoveSkillCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                        SkillDataViewModel="{Binding DataContext.SkillDataViewModel, RelativeSource={RelativeSource AncestorType=Window}}"
                        SkillType="{Binding DataContext.SkillDataViewModel.SkillType, RelativeSource={RelativeSource AncestorType=Window}}" />
                </StackPanel>

                <ItemsControl
                    Grid.Row="2"
                    Height="500"
                    Margin="0,0,0,0"
                    HorizontalAlignment="Center"
                    AlternationCount="{Binding DataContext.SkillItems.Count, RelativeSource={RelativeSource AncestorType=Window}}"
                    ItemsSource="{Binding DataContext.SkillItems, RelativeSource={RelativeSource AncestorType=Window}}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel
                                Margin="0,0,0,0"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Top"
                                Orientation="Vertical">
                                <TextBlock Foreground="White" Text="{Binding Path=(ItemsControl.AlternationIndex), RelativeSource={RelativeSource AncestorType=ContentPresenter}, Converter={StaticResource IndexToNumberConverter}, StringFormat='Required Skill {0}'}" />
                                <control:SkillSlot
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    AddSkillCommand="{Binding DataContext.AddSkillTreeCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                    CommandParameter="{Binding Path=(ItemsControl.AlternationIndex), RelativeSource={RelativeSource AncestorType=ContentPresenter}}"
                                    RemoveSkillCommand="{Binding DataContext.RemoveSkillTreeCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                    SkillDataViewModel="{Binding SkillDataViewModel}"
                                    SkillType="{Binding SkillDataViewModel.SkillType}" />
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </Grid>
        </DataTemplate>
        <!--  Template for SkillUI  -->
        <DataTemplate x:Key="SkillUI">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <StackPanel
                    Grid.Row="0"
                    Grid.ColumnSpan="2"
                    Margin="0,0,0,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top"
                    Orientation="Vertical">
                    <TextBlock Foreground="White" Text="{x:Static rs:Resources.ID}" />
                    <ui:NumberBox
                        Width="300"
                        Margin="0,0,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top"
                        Maximum="2147483647"
                        Minimum="0"
                        Value="{Binding DataContext.DataTableManager.SelectedItem[nID], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                        <i:Interaction.Behaviors>
                            <bh:DataRowViewBehavior Column="nID" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                        </i:Interaction.Behaviors>
                    </ui:NumberBox>
                </StackPanel>
                <StackPanel
                    Grid.Row="1"
                    Grid.Column="0"
                    Margin="0,0,0,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top"
                    Orientation="Vertical">
                    <TextBlock Foreground="White"  Text="{x:Static rs:Resources.Focus}" />
                    <ComboBox
                        Width="Auto"
                        Height="24"
                        Margin="0,0,0,0"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Left"
                        VerticalContentAlignment="Center"
                        IsReadOnly="True"
                        ItemsSource="{Binding DataContext.JobItems, RelativeSource={RelativeSource AncestorType=Window}}"
                        SelectedValue="{Binding DataContext.Job, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType=Window}}"
                        SelectedValuePath="ID"
                        Style="{StaticResource ComboBoxStyle}"
                        Template="{StaticResource lb_combobox}" />
                </StackPanel>
                <StackPanel
                    Grid.Row="1"
                    Grid.Column="1"
                    Margin="0,0,0,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top"
                    Orientation="Vertical">
                    <TextBlock Foreground="White" Text="Skill Tree Type" />
                    <ComboBox
                        Width="Auto"
                        Height="24"
                        Margin="0,0,0,0"
                        HorizontalAlignment="Left"
                        HorizontalContentAlignment="Left"
                        VerticalContentAlignment="Center"
                        IsReadOnly="True"
                        ItemsSource="{Binding DataContext.SkillClassItems, RelativeSource={RelativeSource AncestorType=Window}}"
                        SelectedValue="{Binding DataContext.SkillClass, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType=Window}}"
                        SelectedValuePath="ID"
                        Style="{StaticResource ComboBoxStyle}"
                        Template="{StaticResource lb_combobox}" />
                </StackPanel>

                <StackPanel
                    Grid.Row="2"
                    Grid.Column="0"
                    Margin="0,0,0,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top"
                    Orientation="Vertical">
                    <TextBlock Foreground="White" Text="Column" />
                    <ui:NumberBox
                        Width="Auto"
                        Margin="0,0,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top"
                        Maximum="{Binding DataContext.SkillTreeColumnMax, RelativeSource={RelativeSource AncestorType=Window}}"
                        Minimum="1"
                        Value="{Binding DataContext.Column, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType=Window}}" />
                </StackPanel>
                <StackPanel
                    Grid.Row="2"
                    Grid.Column="1"
                    Margin="0,0,0,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top"
                    Orientation="Vertical">
                    <TextBlock Foreground="White" Text="Row" />
                    <ui:NumberBox
                        Width="Auto"
                        Margin="0,0,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top"
                        Maximum="7"
                        Minimum="1"
                        Value="{Binding DataContext.Tier, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource AncestorType=Window}}" />
                </StackPanel>

                <StackPanel
                    Grid.Row="3"
                    Grid.ColumnSpan="2"
                    Margin="0,0,0,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    Orientation="Vertical">
                    <TextBlock Foreground="White" Text="Movie" />
                    <TextBox
                        Width="Auto"
                        Height="30"
                        Margin="0,0"
                        d:Text="szMovie"
                        FontSize="12"
                        Template="{StaticResource lb_textbox11}"
                        Text="{Binding DataContext.DataTableManager.SelectedItem[szMovie], Mode=TwoWay, UpdateSourceTrigger=Explicit, RelativeSource={RelativeSource AncestorType=Window}}">
                        <i:Interaction.Behaviors>
                            <bh:DataRowViewBehavior Column="szMovie" UpdateItemValueCommand="{Binding DataContext.DataTableManager.UpdateItemValueCommand, RelativeSource={RelativeSource AncestorType=Window}}" />
                        </i:Interaction.Behaviors>
                    </TextBox>
                </StackPanel>

                <StackPanel
                    Grid.Row="4"
                    Grid.ColumnSpan="2"
                    Margin="0,10,0,10"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top"
                    Orientation="Horizontal">
                    <Image
                        Margin="0,0,10,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Cursor="Help"
                        Source="/Assets/icon/icon_help_tip.png"
                        Stretch="None"
                        ToolTip="{x:Static rs:Resources.AddSkillHelp}" />
                    <TextBlock
                        Margin="0,0,0,0"
                        HorizontalAlignment="Center"
                        Foreground="White"
                        Text="{Binding DataContext.SkillClassName, RelativeSource={RelativeSource AncestorType=Window}}" />
                </StackPanel>

                <Grid
                    Grid.Row="5"
                    Grid.ColumnSpan="2"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="60" />
                        <ColumnDefinition Width="60" />
                        <ColumnDefinition Width="60" />
                        <ColumnDefinition Width="60" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="64" />
                        <RowDefinition Height="64" />
                        <RowDefinition Height="64" />
                        <RowDefinition Height="64" />
                        <RowDefinition Height="64" />
                        <RowDefinition Height="64" />
                        <RowDefinition Height="64" />
                    </Grid.RowDefinitions>
                    <Image
                        Grid.Row="0"
                        Grid.RowSpan="7"
                        Grid.ColumnSpan="4"
                        Panel.ZIndex="-1"
                        Source="{Binding DataContext.SkillTreeImage, RelativeSource={RelativeSource AncestorType=Window}}"
                        Stretch="Fill" />
                    <StackPanel
                        Grid.Row="{Binding DataContext.SkillTreeRow, RelativeSource={RelativeSource AncestorType=Window}}"
                        Grid.Column="{Binding DataContext.SkillTreeColumn, RelativeSource={RelativeSource AncestorType=Window}}"
                        Margin="0,0,0,0"
                        Orientation="Vertical">
                        <control:SkillSlot
                            Margin="0,0,0,0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Top"
                            AddSkillCommand="{Binding DataContext.AddSkillUICommand, RelativeSource={RelativeSource AncestorType=Window}}"
                            CommandParameter="0"
                            RemoveSkillCommand="{Binding DataContext.RemoveSkillUICommand, RelativeSource={RelativeSource AncestorType=Window}}"
                            SkillDataViewModel="{Binding DataContext.SkillDataViewModel, RelativeSource={RelativeSource AncestorType=Window}}"
                            SkillType="{Binding DataContext.SkillDataViewModel.SkillType, RelativeSource={RelativeSource AncestorType=Window}}" />
                    </StackPanel>
                </Grid>
            </Grid>
        </DataTemplate>

        <dt:SkillTemplateSelector
            x:Key="SkillTemplateSelector"
            Skill="{StaticResource Skill}"
            SkillTree="{StaticResource SkillTree}"
            SkillUI="{StaticResource SkillUI}" />
    </Window.Resources>
    <ContentControl Template="{StaticResource box_green02}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="40" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <ui:TitleBar
                x:Name="TitleBar"
                Title="{Binding Title}"
                Grid.ColumnSpan="3"
                Height="30"
                Margin="30,0,0,0"
                VerticalAlignment="Center"
                d:Title="Skill Editor"
                ButtonsForeground="White"
                FontSize="15"
                Foreground="White">
                <ui:TitleBar.Icon>
                    <ui:ImageIcon
                        Width="20"
                        Height="20"
                        Margin="0,0,0,-3"
                        Source="/Assets/icon/icon_magic_area01.png" />
                </ui:TitleBar.Icon>
            </ui:TitleBar>

            <control:SkillEditorMenu Grid.Row="1" />

            <ContentControl
                Grid.Row="1"
                Grid.RowSpan="2"
                Grid.Column="1"
                Margin="0,0,0,0"
                Content="{Binding SkillType}"
                ContentTemplateSelector="{StaticResource SkillTemplateSelector}"
                Visibility="{Binding IsSelectedItemVisible}" />

            <control:Datagrid
                Grid.Row="2"
                Grid.Column="0"
                Visibility="{Binding IsVisible}" />

            <TextBlock
                Grid.Row="2"
                Grid.ColumnSpan="3"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                FontSize="15"
                Foreground="White"
                Text="{Binding OpenMessage}" />
        </Grid>
    </ContentControl>
</Window>
